2019年8月7日面试总结

今天是“堆糖”的面试，之前在拉钩网上投了这家公司，简历被标记为“待沟通”然后过了好久，我都快忘了这家公司的时候他给我打电话约我面试，也就是今天的电面。

刚开始我觉得这是家小公司问的应该不难，因为我之前也投了一些超小型或者说是开发部规模不大的公司，面试都是问的很水。然后这家的面试官对着我写的技能清单问，上来就问我 synchronized 关键字，我就简单说了一下基本的用法之后开始跟他扯底层字节码又扯到偏向锁、轻量级锁、重量级锁等等。当时就是想看看面试官会不会继续问我底层原理，也可以侧面的反映出这家公司的水平，然后他真就接着问了，我突然被问到还有点懵，想了一会才整理好思路，下面主要列举一下被问到的问题吧：

- 第一个问的是泛型擦除。

    我就说了一下 java 的泛型是编译期泛型，不是运行时泛型。他会在编译时擦除成限定类型或者是 Object 类型，还扯到了泛型擦除的时候会存在冲突，生成桥方法解决冲突。
    
    后来面试完查了查资料发现，泛型擦除产生的冲突生成桥方法那一部分我理解的也不是很对，不知道当时面试官有没有发现。

- synchronized 关键字，我通过这个扯到了偏向锁什么的之后他又问我锁是怎么膨胀的。

    我当时回答的时候思路不是很清晰，突然问的特别深入我有点没反应过来而且也有点紧张，他问我轻量级锁什么时候膨胀为重量级锁的时候我差点没答上来。

- volatile 关键字，说一下 volatile 关键字的一些原理，他能保证线程安全吗？

    这个问题我答得还不错，先说了它只保证可见性，不保证原子性，又简单介绍了 java 内存模型，说了说主内存和工作内存的数据交互。
    
- 又是个很容易被问的问题，从 HashMap 底层数据结构起手，然后引出 HashMap 线程安全，又引出 线程安全的集合 ConcurrentHashMap，接着又问了 ConcurrentHashMap 的底层原理，源码相关。

    HashMap 我还是比较熟悉的，涉及到底层数据结构，红黑树，以及为什么使用红黑树，这些都没什么问题。
    
    后面问到 ConcurrentHashMap 我就有点蒙蔽了，只记得他是使用的分段锁，分了 16 段，后面他问的我那些都回答不上来。

- JMM、类加载，面试官对于 JVM 方面的知识应该也不算精通，他让我简单介绍一下我 “JMM（java 内存模型）”，java memory model 这个概念是为了让 java 系统屏蔽操作系统或者硬件的差异，定义了一些 java 操作内存的原则，例如 8 种操作内存的基本指令，将内存划分为工作内存和主内存等。后来他提示我说：“就是 jvm 运行的时候内存是怎么划分的”，我就知道他说的应该是“jvm 的运行时数据区域划分”而不是“java memory model”。然后又引出了类加载，我以为他问的是类加载的各个过程，什么加载字节码验证字节码初始化类什么什么的，后来他又提示我说，就是“双亲委派模型”。

    像“运行时数据区域”、“双亲委派模型”这类的问题还是比较容易回答的，也就不多说了。

- spring 里面用到了什么设计模式？单例模式相关的等等

    我当时就只记住了 工厂模式（Bean 工厂），单例模式（默认注册的 Bean 是单例的），然后面试官就在问我单例模式，也算是问的比较多的问题，我对此也相当熟悉，就不多说了。

- 如何判断一个链表中有环

    这个也是以前没想过的问题，又是临时想的，用蛮力法解决的。面试官特别好，还给我说了正确的解法，使用快慢指针 —— 就类似与两个人赛跑，如果是直路，那么跑的快的人和跑的慢的人永远不会相遇，如果是绕圈跑，那么会相遇，也就是判断两个指针会不会重合。

- mysql 索引，联合索引，回表等等

    数据库相关的是我的弱项，这些问题回答的都不算好。我说 mysql 可以给字符串的一部分加索引，这个面试官也不知道哈哈哈哈。

- redis —— 常用的数据结构有哪些？ 要是服务器关机了怎么办？

    这里我提前跟他说了，自己 redis 是自学的，还没有做过项目，所以问的问题比较简单。
    
    常用数据结构无非是 K/V、hash、list、set、zset
    
    第二个问题也就是 rdb、aof、主从复制，读写分离，哨兵模式 

面试问了 40 多分钟，还没问项目，最后让面试官评价一下，结果那个时候突然信号不好，他说的啥我没听清，又不好意思再问一遍。。。只听到最后说了一句，我算是最近三天里面表现最好的一个。哈哈哈，瞬间又充满了自信。感觉这个公司还不错，要是大厂的内推失败了就去这个公司也挺好，就是不知道他能不能接受我晚点入职。


